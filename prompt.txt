总体目标：编写一个运行在阿里云上的订阅服务。

具体要求(你要做的事)：
1.对外提供RESTful 接口，密钥认证
2.提供数据接收服务，客户端用户调用接口上报数据。
3.提供订阅服务，其他多个客户端用户获取数据
4.对不同客户端用户用户进行接口访问权限管理
输出：
1.可以运行的完整程序
2.单元测试和集成测试

输出：
1.结构完整、可运行的程序
2.包含测试用例:单元测试、集成测试


整体设计：
1. 技术栈选择：
   - 编程语言：Python
   - Web框架：Flask 或 FastAPI
   - 数据库：sqlite 或 MySQL
   - 认证方式：API Key 认证
   - 部署平台：阿里云 ECS 或 腾讯云 或 谷歌云

2. 系统架构设计：
   - API 网关：处理所有外部请求，进行认证和路由。
   - 数据接收服务：处理客户端用户上报的数据，存储到数据库。
   - 订阅服务：允许客户端用户订阅数据，并通过轮询或 WebSocket

3. 数据库设计：
    - 用户表：存储用户信息和 API Key。信息，如名称、联系方式等。
    - 数据表：存储客户端用户上报的数据。包含数据内容(type、strategy_id、symbol、execute_date、description)、时间戳等字段。
    - 策略表：存储策略相关信息。包含策略ID(strategy_id)、名称(name)、描述(description)等字段。
    - 订阅表：存储订阅信息和订阅的客户端用户。
    - 权限表：管理不同客户端用户的访问权限。
    - 角色表：定义不同角色及其权限。
    - 日志表：记录所有的访问和操作日志。
4. 安全设计：
    - 使用 HTTPS 确保数据传输的安全性。
    - 实现 API Key 认证，确保只有授权客户端用户可以访问接口。
    - 定期轮换 API Key，提升安全性。
5. 测试设计：
    - 单元测试：针对各个模块编写单元测试，确保功能正确。单元测试≥80%；
    - 集成测试：模拟客户端用户请求，测试整个系统的工作流程。
6. 部署设计：
    - 使用 Docker 容器化应用，方便部署和管理。
    - 使用 CI/CD 工具实现自动化部署。
    - 监控和日志：使用阿里云的监控服务，实时监控系统状态，记录日志以便排查问题。
7. 文档编写：
    - 编写 API 文档，说明各个接口的使用方法。
    - 编写部署文档，说明如何在阿里云上部署和运行服务
8. 维护和扩展：
    - 定期更新依赖库，修复已知漏洞。
    - 根据用户反馈，持续改进和优化服务。
9. 性能优化：
    - 使用缓存机制提升数据访问速度。
    - 优化数据库查询，减少响应时间。
    - 负载均衡，确保高并发情况下的服务稳定性。
10. 备份和恢复：
    - 定期备份数据库，确保数据安全。
    - 制定灾难恢复计划，确保系统在故障情况下能够快速恢复。
11. 法律合规：
    - 确保数据处理符合相关法律法规，如 GDPR 等。
    - 制定隐私政策，明确数据使用和保护措施。
12. 用户支持：
    - 提供技术支持渠道，帮助用户解决使用中的问题。
    - 定期收集用户反馈，改进服务质量。

16. 持续学习和改进：
    - 定期进行技术分享，提升团队整体技术水平。
    - 关注行业动态，及时引入新技术和方法。
17. 用户界面设计：
    - 提供简洁易用的用户界面，方便用户进行数据上报和订阅管理。
    - 设计响应式界面，确保在不同设备上都有良好体验。
18. 国际化支持：
    - 支持多语言界面，满足不同地区用户的需求。
    - 考虑时区差异，确保数据时间的准确性。
19. 日志管理：
    - 实现详细的日志记录，方便问题排查和性能分析。
    - 定期清理日志，防止存储空间不足。
    - 用户所有的操作行为均有日志记录，确保可追溯性。
20. 监控和报警：
    - 实时监控系统性能指标，如响应时间、错误率等。
    - 设置报警机制，及时通知运维人员处理异常情况。
21. 数据分析和报告：
    - 提供数据分析功能，帮助用户了解数据趋势和模式。
    - 定期生成报告，发送给订阅用户。
22. 可扩展性设计：
    - 设计模块化架构，方便后续功能扩展。
    - 预留接口，支持第三方集成和扩展。
23. 备份和恢复：
    - 定期备份数据库，确保数据安全。
    - 制定灾难恢复计划，确保系统在故障情况下能够快速恢复。
